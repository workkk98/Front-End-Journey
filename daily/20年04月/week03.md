# 20å¹´4æœˆå‘¨è®° 3

#### splitChunks

å…³äºŽsplitChunksæ’ä»¶çš„å°æ®µä»£ç 
```js
 optimization: {
   splitChunks: {
     chunks: 'async', // é»˜è®¤async, å…¶ä»–è¿˜æœ‰ inital, all
     cacheGroups: {
       vendors: {
         test: /\/node_modules\//,
         priority: 10,
         chunks: 'all'
       }
     }
   }
 }
```

é‚£æˆ‘ä»¬çŸ¥é“ splitChunkså°±æ˜¯ä¸€ä¸ªåˆ†ç¦»ç­–ç•¥ï¼Œåº”ç”¨äºŽæˆ‘ä»¬çš„æ¨¡å—ã€‚

å…ˆæ¥çœ‹ä¸‹chunksçš„æ„æ€ï¼Œchunksæ˜¯æŒ‡å“ªäº›æ¨¡å—ä¼šåº”ç”¨è¿™ä¸ªåˆ†ç¦»ç­–ç•¥ã€‚ä¾‹å¦‚'async', å°±æŒ‡æ˜Žäº†

åŠ¨æ€å¯¼å…¥çš„æ¨¡å—ï¼Œé‡‡ç”¨è¿™ä¸ªåˆ†ç¦»ç­–ç•¥ã€‚

é‚£è¿™ä¸ªåˆ†ç¦»ç­–ç•¥é»˜è®¤æœ‰ä»¥ä¸‹æ¡ä»¶
1. æˆ‘ç§°ä¸ºä½¿ç”¨é¢‘çŽ‡ï¼Œä¾‹å¦‚æ¥è‡ªnode_modulesæˆ–æ˜¯åŠ¨æ€å¯¼å…¥çš„æ¨¡å—å…±äº«äº†è¿™ä¸ªæ¨¡å—
2. æ¨¡å—å¤§å° >=30kb
3. å…¥å£æ¨¡å—çš„å¹¶è¡Œè¯·æ±‚ å°äºŽ5
4. åˆå§‹é¡µé¢çš„å¹¶è¡Œè¯·æ±‚ å°äºŽ3(è¿™ä¸ªåˆå§‹é¡µé¢æŒ‡çš„å°±æ˜¯ index.htmlåŠ è½½æ—¶ï¼Œä¼šæœ‰å¤šå°‘ä¸ªè¯·æ±‚)

è¿™äº›å±žæ€§éƒ½æ˜¯å¯è¦†ç›–çš„å…·ä½“å¯ä»¥çœ‹ å®˜ç½‘é“¾æŽ¥[splitChunks](https://webpack.js.org/plugins/split-chunks-plugin/#splitchunkscachegroups)

**cacheGroups**

ç¨å¾®æä¸€ç¬”cacheGroups, å› ä¸ºé€šè¿‡è¿™ä¸ªå±žæ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†é—¨åˆ«ç±»çš„è‡ªç”±æ‰“åŒ…æ¨¡å—ã€‚

ä¾‹å¦‚æŠŠ vueç±», axiosç±»çš„æ‰“åŒ…åœ¨ä¸€èµ·

#### ç¿»è½¬é“¾è¡¨2

é—®é¢˜: é“¾è¡¨ç¬¬nä¸ªèŠ‚ç‚¹å’Œç¬¬mä¸ªèŠ‚ç‚¹ç¿»è½¬ã€‚

é‚£è¯´ä¸‹æˆ‘çœ‹åˆ°ä¸åŒçš„æ€è·¯ã€‚å› ä¸ºæ˜¯æŠŠé“¾è¡¨çš„éƒ¨åˆ†é€†è½¬.

åŽŸå…ˆæ˜¯è¿™æ · n -> n+1 -> n+2 -> n+3 -> ... -> m

é‚£æˆ‘çš„æƒ³æ³•æ˜¯ n <- n+1 <- ... <- m è¿™æ ·ä¸€æ­¥æ­¥åŽ»é€†è½¬åŽŸå…ˆçš„éƒ¨åˆ†å³å¯ï¼Œç„¶åŽé¦–å°¾è¿žæŽ¥åˆ°ç›¸åº”çš„ä½ç½®

ä½†æ˜¯åˆ«äººçš„æƒ³æ³• å¾ˆå·§å¦™ï¼Œ æŠŠn+1ç§»åˆ°nèŠ‚ç‚¹å‰ï¼Œç„¶åŽå†æŠŠn+2èŠ‚ç‚¹ç§»åˆ°n+1èŠ‚ç‚¹å‰ã€‚

#### CORS cookieé—®é¢˜

æ˜¨å¤©æ‰¾äº†å¾ˆä¹…å§ã€‚å®žé™…ä¸Šé—®é¢˜å°±å‡ºåœ¨äº† Access-Control-Allow-Originè¿™ä¸ªå­—æ®µ å’Œè¯·æ±‚Originå­—æ®µä¸ç»Ÿä¸€å¯¼è‡´çš„ã€‚

å› ä¸ºæºå¸¦cookieè®¿é—® å¿…é¡»è¿™ä¸¤ä¸ªå­—æ®µå€¼ç›¸åŒ

åŠ ä¸Šchromeç§»é™¤äº† optionsè¯·æ±‚ã€‚ä»¥è‡³äºŽæˆ‘æ›´éš¾åŽ»åˆ¤æ–­äº†ã€‚è¿™ä¹Ÿæé†’æˆ‘ å¾—åŽ»æŠ“åŒ…äº†


#### IP

IPåœ°å€ç”± ç½‘ç»œåœ°å€å’Œä¸»æœºåœ°å€ç»„æˆã€‚

ç½‘ç»œåœ°å€åœ¨ä¸åŒçš„æ•°æ®é“¾è·¯çš„æ¯ä¸ªæ®µé…ç½®äº†ä¸åŒçš„å€¼ã€‚ä¸»æœºåœ°å€åœ¨æŸä¸ªç½‘ç»œæ®µå†…æ˜¯å”¯ä¸€çš„

æ‰€ä»¥ä¿è¯äº†IPåœ°å€çš„å”¯ä¸€æ€§ã€‚

å¹¿æ’­å°±æ˜¯ä¸»æœºå·åœ°å€éƒ½è®¾ä¸º1ï¼Œæ‰€ä»¥å°±æ˜¯å‘è¿™ä¸ªç½‘ç»œæ®µçš„å…¨éƒ¨ä¸»æœºå‘é€åŒ…


#### è®°å½•ä¸€æ¬¡å› ä¸ºicloudå¯¼è‡´çš„é‡è£…ç³»ç»Ÿäº‹ä»¶

å†é€šè¿‡yarn å®‰è£…åŒ…æ—¶ï¼Œä¸­é—´ä¸€ç³»åˆ—æ“ä½œã€‚ç”µè„‘æ¸©åº¦å¾ˆé«˜ï¼Œç„¶åŽæˆ‘å†æŸ¥è¯¢æ˜¯ birdè¿›ç¨‹é—®é¢˜ã€‚å¯¼è‡´æˆ‘icloudæ¡Œé¢æ— æ³•åŒæ­¥ã€‚æˆ‘åŽæ¥æƒ³å¹²è„†æŠŠå¼€å‘é¡¹ç›®ç§»é™¤æ¡Œé¢æ–‡ä»¶å¤¹ã€‚ä½†æ˜¯æˆ‘å¾ˆä¸èˆ’æœè§‰å¾—(å¼ºè¿«ç—‡ðŸ˜­)ï¼Œæ‰€ä»¥æˆ‘æŠ¹æŽ‰äº†ç¡¬ç›˜ï¼Œé‡è£…äº†mac OSã€‚

å†é‡æ–°å®‰è£…çš„æ—¶å€™é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ã€‚ä¾‹å¦‚brewæ— æ³•ä¸‹è½½ é€šè¿‡curlå‘½ä»¤ï¼Œ é—®é¢˜åœ¨äºŽ DNSæ±¡æŸ“ã€‚æˆ‘å‘çŽ°å‘½ä»¤è¡Œè¿˜æ˜¯éžå¸¸é‡è¦çš„ï¼ŒåŽé¢è¿˜æ˜¯å¾—å¤šå­¦ä¹ ã€‚æ‰€ä»¥ä»Šå¤©è®°å½•ä¸‹æ¥ã€‚